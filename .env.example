# Example environment variables for Petstore API Server
# Copy this file to .env and modify as needed

# Environment selection (development, production, etc.)
RUN_ENV=development

# Optional: Override configuration directory
# CONFIG_DIR=./config

# Secrets (these would be different in each environment)
# API_KEY=your_api_key_here

# Essential environment variables
# RUST_LOG is set based on APP_LOG_LEVEL from config, but can be overridden
RUST_LOG=${APP_LOG_LEVEL:-info}

# Authentication settings for Entra ID (Azure AD)
RUST_BACKEND_SECRET=your_client_secret_here
RUST_BACKEND_SCOPE=api://your-client-id
RUST_BACKEND_PERMISSION=default-rust-backend
RUST_BACKEND_CLIENT_ID=your-client-id
RUST_BACKEND_AUDIENCE=api://rust-backend
RUST_BACKEND_TENANT_ID=your-tenant-id
RUST_BACKEND_TOKEN_URL=https://login.microsoftonline.com/your-tenant-id/oauth2/v2.0/token

# Authentication settings
AUTH_ENABLED=true
DEBUG_AUTH=false
# DOWNSTREAM_API_SCOPE=api://your-downstream-api/.default

# Optional: Override specific configuration values
# These will take precedence over YAML config files

# Server overrides
# SERVER_HOST=0.0.0.0
# SERVER_PORT=3000
# SERVER_TIMEOUT_SECONDS=10
# SERVER_MAX_RETRIES=3

# API endpoint overrides
# API_CAT_FACT_URL=https://catfact.ninja/fact
# API_PETSTORE_URL=https://petstore3.swagger.io/api/v3

# Application overrides
# APP_NAME="Petstore API Server"
# APP_VERSION="1.0.0"
# APP_LOG_LEVEL=info

# Cache overrides
# CACHE_ENABLED=true
# CACHE_TTL_SECONDS=300
# CACHE_MAX_CAPACITY=1000

# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=3000

# External API endpoints
API_CAT_FACT_URL=https://catfact.ninja/fact
API_PETSTORE_URL=https://petstore3.swagger.io/api/v3

# Application settings
APP_NAME="Petstore API Server"
APP_VERSION="1.0.0"
RUST_LOG=info  # Possible values: trace, debug, info, warn, error 

# Reliability settings
RELIABILITY_RETRY_ENABLED=true
RELIABILITY_RETRY_MAX_ATTEMPTS=3
RELIABILITY_RETRY_BASE_DELAY_MS=100
RELIABILITY_RETRY_MAX_DELAY_MS=1000
RELIABILITY_RETRY_USE_EXPONENTIAL_BACKOFF=true

# Circuit Breaker Settings (Rolling Window Mode)
RELIABILITY_CIRCUIT_BREAKER_ENABLED=true
RELIABILITY_CIRCUIT_BREAKER_USE_CONSECUTIVE_FAILURES=false
RELIABILITY_CIRCUIT_BREAKER_WINDOW_SECONDS=60
RELIABILITY_CIRCUIT_BREAKER_FAILURE_PERCENTAGE=50
RELIABILITY_CIRCUIT_BREAKER_FAILURE_STATUS_CODES="500,502,503,504"
RELIABILITY_CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000
RELIABILITY_CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# Legacy Circuit Breaker Settings (Consecutive Failures Mode)
# RELIABILITY_CIRCUIT_BREAKER_USE_CONSECUTIVE_FAILURES=true
# RELIABILITY_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

RELIABILITY_RATE_LIMIT_ENABLED=true
RELIABILITY_RATE_LIMIT_REQUESTS_PER_WINDOW=100
RELIABILITY_RATE_LIMIT_WINDOW_SECONDS=60
RELIABILITY_RATE_LIMIT_PER_CLIENT=false

RELIABILITY_TIMEOUT_ENABLED=true
RELIABILITY_TIMEOUT_TIMEOUT_SECONDS=30

RELIABILITY_CONCURRENCY_ENABLED=false
RELIABILITY_CONCURRENCY_MAX_CONCURRENT_REQUESTS=100 